{% extends "./soundcloud.html" %}
{% block body %}
<article class="soundcloud__favorites">
{% if favorites %}
{% for fav in favorites %}
<div class="soundcloud__favorites__song">
	<a class="soundcloud__favorites__song__title" href="/soundcloud/player?listen={{ fav.id }}"><img src="{% if fav.artwork_url %}{{ fav.artwork_url }}{% else %}{{ fav.user.avatar_url }}{% endif %}" class="soundcloud__favorites__song__img"></a>
	<a class="soundcloud__favorites__song__title" href="/soundcloud/player?listen={{ fav.id }}">{{ fav.title }}</a><br />
	<a href="{{ fav.user.permalink_url }}" class="soundcloud__favorites__song__user">{{ fav.user.username }}</a>
	<span class="soundcloud__favorites__song__duration js-soundcloud__favorites__song__duration" data-duration="{{ fav.duration }}"></span>
</div>
{% endfor %}
<script type="text/javascript">
	var msToTimeFormat = function(miliseconds) {
		sec = Math.floor(Number(miliseconds)/1000);
		hrs = Math.floor(sec/3600);
		min = Math.floor((sec - (hrs*3600))/60);
		sec = sec - (min*60) - (hrs*3600);
		return (hrs > 0 ? (hrs < 10 ? "0"+hrs:hrs)+":":"")+(min === 0 ? "00:":(min < 10 ? "0"+min:min)+":")+(sec === 0 ? "00":(sec < 10 ? "0"+sec:sec));
	};
	$(".js-soundcloud__favorites__song__duration").each(function() {
		var duration = $(this).data("duration");
		$(this).html(msToTimeFormat(duration));
	});
</script>
{% else %}
	<p class="soundcloud__favorites__nosongs">No hay canciones</p>
{% endif %}
</article>
{% endblock %}